!function(){"use strict";var e={d:function(t,i){for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return s}});var i=Object.freeze({ABBR:"abbreviation",ADDR:"address",ADR1:"address1",ADR2:"address2",ADR3:"address3",ADOP:"adoption",AFN:"ancestralFileNumber",AGE:"ageAtEvent",AGNC:"responsibleAgency",ALIA:"alias",ANCE:"ancestors",ANCI:"ancestorInterest",ANUL:"annulment",ASSO:"associates",AUTH:"author",BAPL:"baptismLDS",BAPM:"baptism",BARM:"barMitzvah",BASM:"basMitzvah",BIRT:"birth",BLES:"blessing",BLOB:"binaryObject",BURI:"burial",CALN:"callNumber",CAST:"caste",CAUS:"cause",CENS:"census",CHAN:"change",CHAR:"character",CHIL:"child",CHR:"christening",CHRA:"adultChristening",CITY:"city",CONC:"concatenation",CONF:"confirmation",CONL:"confirmationLDS",CONT:"continued",COPR:"copyright",CORP:"corporate",CREA:"creation",CREM:"cremation",CROP:"crop",CTRY:"country",DATA:"data",DATE:"date",DEAT:"death",DESC:"descendants",DESI:"descendantInterest",DEST:"destination",DIV:"divorce",DIVF:"divorceFiling",DSCR:"physicalDescription",EDUC:"education",EMAIL:"email",EMIG:"emigration",ENDL:"endowment",ENGA:"engagement",EVEN:"event",EXID:"externalIdentifier",FACT:"fact",FAM:"family",FAMC:"familyChild",FAMF:"familyFile",FAMS:"familySpouse",FAX:"facsimile",FCOM:"firstCommunion",FILE:"file",FORM:"format",GEDC:"gedcom",GIVN:"givenName",GRAD:"graduation",HEAD:"header",HEIGHT:"heightInPixels",HUSB:"husband",IDNO:"identificationNumber",IMMI:"immigration",INDI:"individual",INIL:"initiatoryLatterDay",LANG:"language",LEFT:"leftCropWidth",LEGA:"legatee",LATI:"lat",LONG:"lng",MAP:"map",MARB:"marriageBans",MARC:"marriageContract",MARL:"marriageLicense",MARR:"marriage",MARS:"marriageSettlement",MEDI:"medium",MIME:"mediaType",NAME:"name",NATI:"nationality",NATU:"naturalization",NCHI:"childrenNumber",NICK:"nickname",NMR:"marriageCount",NO:"didNotHappen",NOTE:"note",NPFX:"namePrefix",NSFX:"nameSuffix",OBJE:"object",OCCU:"occupation",ORDI:"ordinance",ORDN:"ordination",PAGE:"page",PEDI:"pedigree",PHON:"phone",PHRASE:"phrase",PLAC:"place",POST:"postalCode",PROB:"probate",PROP:"property",PUBL:"publication",QUAY:"quality",REFN:"reference",RELA:"relationship",RELI:"religion",REPO:"repository",RESI:"residence",RESN:"restriction",RETI:"retirement",RFN:"recordFileNumber",RIN:"recordIdNumber",ROLE:"role",SCHMA:"schema",SDATE:"sortDate",SEX:"sex",SLGC:"sealingChild",SLGS:"sealingSpouse",SNOTE:"sharedNote",SOUR:"source",SPFX:"surnamePrefix",SSN:"socialSecurityNumber",STAE:"state",STAT:"status",SUBM:"submiter",SUBN:"submission",SURN:"surname",TAG:"tag",TEMP:"temple",TEXT:"text",TIME:"time",TITL:"title",TOP:"topCropWidth",TRAN:"translation",TRLR:"trailer",TYPE:"type",UID:"uniqueIdentifier",VERS:"version",WIDTH:"widthInPixel",WIFE:"wife",WILL:"will",WWW:"webAddress"});function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head={},this._submissions={},this._submitters={},this._individuals={},this._families={},this._notes={},this._sources={},this._repositories={},this._objects={},this._events={},this._places={},this._gedcom=null,this._lines=[]},(t=[{key:"loadGedcom",value:function(e){this._parseGedcom(e)}},{key:"_parseGedcom",value:function(e){this.__formatRawGedcom(e);for(var t=0;t<this._lines.length;++t)"0"===this._lines[t].split(" ")[0]&&(t=this.__newTopItem(this._lines,t))}},{key:"__formatRawGedcom",value:function(e){-1!==e.indexOf("\r\n")?(this._gedcom=e.replace(/[\r]+/g,""),this._lines=this._gedcom.split("\n")):-1===e.indexOf("\r")&&-1!==e.indexOf("\n")?(this._gedcom=e,this._lines=this._gedcom.split("\n")):(this._gedcom=e,this._lines=this._gedcom.split("\r"))}},{key:"__newTopItem",value:function(e,t){var i=e[t].split(" "),n=this.__getNextElementIndex(e,t,"0"),r=this.__extractItemValuesFromLines(e,1,t,n);if("HEAD"===i[1])this._head=r;else if("SUBN"===i[2])this._submissions=r;else if("SUBM"===i[2])this._submitters=r;else if("INDI"===i[2])this._individuals["".concat(i[1].replaceAll("@",""))]=r;else if("FAM"===i[2])this._families["".concat(i[1].replaceAll("@",""))]=r;else if("NOTE"===i[2])this._notes["".concat(i[1].replaceAll("@",""))]=r;else if("SOUR"===i[2])this._sources["".concat(i[1].replaceAll("@",""))]=r;else if("REPO"===i[2])this._repositories["".concat(i[1].replaceAll("@",""))]=r;else if("OBJE"===i[2])this._objects["".concat(i[1].replaceAll("@",""))]=r;else if("TRLR"===i[1])return e.length;return n-1}},{key:"__getNextElementIndex",value:function(e,t,i){for(var n=t+1;n<e.length;++n){var r=e[n].split(" ");if(parseInt(r[0])<parseInt(i))return n-1;if(r[0]===i)return n}return t}},{key:"__extractItemValuesFromLines",value:function(e,t,n,r){for(var a=[],s=n;s<r;++s)parseInt(e[s].split(" ")[0])===t&&a.push(s);a[a.length-1]!==r&&a.push(r);for(var o={},l=0;l<a.length-1;++l){var c=e[a[l]],u=c.split(" ")[1],m=i[u],d=c.split("".concat(u," "))[1];void 0===m&&console.log(u,l),a[l+1]-a[l]==1||void 0===a[l+1]?this.__setItemValue(o,m,d):(o[m]={},void 0!==d&&(o[m][m]=d),Object.assign(o[m],this.__extractItemValuesFromLines(e,t+1,a[l],a[l+1])))}return o}},{key:"__setItemValue",value:function(e,t,i){if(void 0===e[t])e[t]=i;else if(Array.isArray(e[t]))e[t].push(i);else{var n=e[t];e[t]=[n,i]}}},{key:"_buildRelations",value:function(){console.log(this)}},{key:"exportGedcom",value:function(){this._gedcom}}])&&r(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.JsGEDCOM=t.default}();